<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Itinéraire technique TIKA</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">

    <script src="https://cdn.jsdelivr.net/npm/echarts@5.5.1/dist/echarts.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/underscore@1.13.7/underscore-umd-min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="./css/styles-rendering.css" rel="stylesheet">
    <script src="./js/chart-render.js"></script>
</head>

<body>
    <div class="container_fluid text-center">
        <h2 class="m-5">Test avant-après</h2>

        <div id="itk"></div>
    </div>

    <script type="text/javascript">

    async function getData() {
        let rotationBefore = {}, rotationAfter = {};

        try {
            const response = await fetch('test/test.json');
            if (!response.ok) {
                throw new Error(`Response status: ${response.status}`);
            }

            rotationBefore = await response.json();
            console.log(rotationBefore);
        } catch (error) {
            console.error(error.message);
        }

        try {
            const response = await fetch('test/test.after.json');
            if (!response.ok) {
                throw new Error(`Response status: ${response.status}`);
            }

            rotationAfter = await response.json();
            console.log(rotationAfter);
        } catch (error) {
            console.error(error.message);
        }

        // Now render the chart and text:
        let renderer = new RotationRenderer('itk', [rotationBefore, rotationAfter]);
        renderer.render();
    }

    getData();
    </script>
</body>

</html>